{% extends 'base.html' %}
{% load static %}

{% block title %}Nuestro Equipo - Partido Liberal Socialdem칩crata{% endblock %}

{% block content %}
<div class="equipo-container">
    <div class="equipo-header">
        <h1>Nuestro Equipo</h1>
        <p>Conoce a las personas que trabajan d칤a a d칤a por los ideales del Partido Politico</p>
    </div>

    <div class="equipo-grid">
        {% for persona in equipo %}
        <div class="equipo-card">
            <div class="equipo-imagen">
                {% if persona.foto %}
                    <img src="{{ persona.foto.url }}" alt="{{ persona.nombre }}" class="foto-perfil">
                {% else %}
                    <div class="foto-placeholder">
                        <span>{{ persona.nombre|slice:":1" }}</span>
                    </div>
                {% endif %}
            </div>
            
            <div class="equipo-info">
                <h3 class="equipo-nombre">{{ persona.nombre }}</h3>
                <p class="equipo-cargo">{{ persona.cargo }}</p>
                
                {% if persona.correo or persona.telefono %}
                <div class="equipo-contacto">
                    {% if persona.correo %}
                    <div class="contacto-item">
                        <span class="contacto-icon">游닎</span>
                        <span class="contacto-text">{{ persona.correo }}</span>
                    </div>
                    {% endif %}
                    
                    {% if persona.telefono %}
                    <div class="contacto-item">
                        <span class="contacto-icon">游</span>
                        <span class="contacto-text">{{ persona.telefono }}</span>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            
            <div class="equipo-acciones">
                <button class="btn-ver-mas" onclick="abrirModal('{{ persona.nombre }}', '{{ persona.cargo }}', '{{ persona.descripcion|safe }}', '{% if persona.foto %}{{ persona.foto.url }}{% endif %}', '{{ persona.correo }}', '{{ persona.telefono }}')">
                    Ver m치s
                </button>
            </div>
        </div>
        {% empty %}
        <div class="equipo-vacio">
            <div class="vacio-icon">游논</div>
            <h3>Pr칩ximamente</h3>
            <p>Estamos trabajando en presentar a nuestro equipo. Vuelve pronto para conocer a nuestros miembros.</p>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Modal para ver detalles completos -->
<div id="modalEquipo" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-body">
            <div class="modal-header">
                <div class="modal-foto">
                    <img id="modalFoto" src="" alt="" class="foto-modal">
                    <div id="modalPlaceholder" class="foto-placeholder-modal" style="display: none;">
                        <span id="modalInicial"></span>
                    </div>
                </div>
                <div class="modal-info">
                    <h2 id="modalNombre"></h2>
                    <p id="modalCargo" class="modal-cargo"></p>
                    <div id="modalContacto" class="modal-contacto"></div>
                </div>
            </div>
            <div class="modal-description">
                <h3>Sobre m칤</h3>
                <div id="modalDescription" class="description-content"></div>
            </div>
        </div>
    </div>
</div>

<style>
    /* ESTILOS PARA LA P츼GINA DE EQUIPO */
    .equipo-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .equipo-header {
        text-align: center;
        margin-bottom: 50px;
    }

    .equipo-header h1 {
        color: var(--rojo-principal);
        margin-bottom: 15px;
        font-size: 2.5em;
    }

    .equipo-header p {
        color: var(--gris-texto);
        font-size: 1.1em;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
    }

    .equipo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin: 0 auto;
    }

    .equipo-card {
        background: var(--blanco);
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .equipo-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .equipo-imagen {
        margin-bottom: 20px;
    }

    .foto-perfil {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--rojo-principal);
        margin: 0 auto;
    }

    .foto-placeholder {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: var(--rojo-principal);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        border: 4px solid var(--rojo-principal);
    }

    .foto-placeholder span {
        color: white;
        font-size: 2.5em;
        font-weight: bold;
    }

    .equipo-info {
        flex-grow: 1;
        margin-bottom: 20px;
    }

    .equipo-nombre {
        color: var(--rojo-principal);
        margin-bottom: 8px;
        font-size: 1.3em;
        font-weight: 600;
    }

    .equipo-cargo {
        color: var(--gris-texto);
        font-weight: 500;
        margin-bottom: 15px;
        font-size: 1em;
    }

    .equipo-contacto {
        text-align: left;
        margin-top: 15px;
    }

    .contacto-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 8px;
        font-size: 0.9em;
    }

    .contacto-icon {
        font-size: 1.1em;
        min-width: 20px;
    }

    .contacto-text {
        color: #666;
        word-break: break-all;
    }

    .equipo-acciones {
        margin-top: auto;
    }

    .btn-ver-mas {
        background-color: var(--rojo-principal);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 5px;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.3s ease;
        width: 100%;
        font-size: 1em;
    }

    .btn-ver-mas:hover {
        background-color: var(--rojo-oscuro);
    }

    /* Estilos para cuando no hay equipo */
    .equipo-vacio {
        grid-column: 1 / -1;
        text-align: center;
        padding: 60px 20px;
        background: var(--blanco);
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .vacio-icon {
        font-size: 4em;
        margin-bottom: 20px;
    }

    .equipo-vacio h3 {
        color: var(--rojo-principal);
        margin-bottom: 15px;
        font-size: 1.8em;
    }

    .equipo-vacio p {
        color: var(--gris-texto);
        font-size: 1.1em;
        max-width: 500px;
        margin: 0 auto;
        line-height: 1.6;
    }

    /* MODAL ESTILOS */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .modal-content {
        background-color: var(--blanco);
        margin: 5% auto;
        padding: 0;
        border-radius: 12px;
        width: 90%;
        max-width: 600px;
        position: relative;
        animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
        from { transform: translateY(-50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    .close-modal {
        position: absolute;
        right: 20px;
        top: 15px;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        color: #999;
        z-index: 10;
    }

    .close-modal:hover {
        color: var(--rojo-principal);
    }

    .modal-body {
        padding: 30px;
    }

    .modal-header {
        display: flex;
        gap: 25px;
        margin-bottom: 30px;
        align-items: flex-start;
    }

    .modal-foto {
        flex-shrink: 0;
    }

    .foto-modal {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid var(--rojo-principal);
    }

    .foto-placeholder-modal {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: var(--rojo-principal);
        display: flex;
        align-items: center;
        justify-content: center;
        border: 3px solid var(--rojo-principal);
    }

    .foto-placeholder-modal span {
        color: white;
        font-size: 2em;
        font-weight: bold;
    }

    .modal-info {
        flex-grow: 1;
    }

    .modal-info h2 {
        color: var(--rojo-principal);
        margin-bottom: 8px;
        font-size: 1.5em;
    }

    .modal-cargo {
        color: var(--gris-texto);
        font-weight: 500;
        font-size: 1.1em;
        margin-bottom: 15px;
    }

    .modal-contacto .contacto-item {
        margin-bottom: 10px;
    }

    .modal-description h3 {
        color: var(--rojo-principal);
        margin-bottom: 15px;
        font-size: 1.3em;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 8px;
    }

    .description-content {
        line-height: 1.6;
        color: var(--gris-texto);
    }

    .description-content p {
        margin-bottom: 15px;
    }

    .description-content ul, .description-content ol {
        margin-left: 20px;
        margin-bottom: 15px;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
        .equipo-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .equipo-header h1 {
            font-size: 2em;
        }

        .equipo-card {
            padding: 20px;
        }

        .modal-content {
            width: 95%;
            margin: 10% auto;
        }

        .modal-header {
            flex-direction: column;
            text-align: center;
            gap: 15px;
        }

        .modal-foto {
            align-self: center;
        }
    }

    @media (max-width: 480px) {
        .equipo-container {
            padding: 15px;
        }

        .equipo-header h1 {
            font-size: 1.8em;
        }

        .modal-body {
            padding: 20px;
        }
    }
</style>

<script>
    function abrirModal(nombre, cargo, description, fotoUrl, correo, telefono) {
        const modal = document.getElementById('modalEquipo');
        const modalFoto = document.getElementById('modalFoto');
        const modalPlaceholder = document.getElementById('modalPlaceholder');
        const modalInicial = document.getElementById('modalInicial');
        const modalNombre = document.getElementById('modalNombre');
        const modalCargo = document.getElementById('modalCargo');
        const modalDescription = document.getElementById('modalDescription');
        const modalContacto = document.getElementById('modalContacto');
        
        // Establecer informaci칩n b치sica
        modalNombre.textContent = nombre;
        modalCargo.textContent = cargo;
        modalDescription.innerHTML = description;
        
        // Manejar la foto
        if (fotoUrl) {
            modalFoto.src = fotoUrl;
            modalFoto.style.display = 'block';
            modalPlaceholder.style.display = 'none';
        } else {
            modalFoto.style.display = 'none';
            modalPlaceholder.style.display = 'flex';
            modalInicial.textContent = nombre.charAt(0);
        }
        
        // Manejar informaci칩n de contacto
        let contactoHTML = '';
        if (correo) {
            contactoHTML += `<div class="contacto-item">
                <span class="contacto-icon">游닎</span>
                <span class="contacto-text">${correo}</span>
            </div>`;
        }
        if (telefono) {
            contactoHTML += `<div class="contacto-item">
                <span class="contacto-icon">游</span>
                <span class="contacto-text">${telefono}</span>
            </div>`;
        }
        modalContacto.innerHTML = contactoHTML;
        
        // Mostrar modal
        modal.style.display = 'block';
        
        // Cerrar modal al hacer clic en la X
        document.querySelector('.close-modal').onclick = function() {
            modal.style.display = 'none';
        }
        
        // Cerrar modal al hacer clic fuera
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    }
</script>
{% endblock content %}